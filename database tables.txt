CREATE TABLE IF NOT EXISTS profile(
f_name VarChar(255) NOT NULL,
l_name VarChar(255) NOT NULL,
email PRIMARY KEY, 
pass NOT NULL
);

CREATE TABLE IF NOT EXISTS Contacts (
email VarChar(255) NOT NULL, 
contactEmail VarChar(255) NOT NULL, 
dateConnected DATETIME 							--'YYYY-MM-DD HH:MM:SS'
PRIMARY KEY(email, contactEmail)
FOREIGN KEY (email) REFERENCES Profile(email)
) ;

CREATE TABLE IF NOT EXISTS groups (
groupID INT NOT NULL AUTO_INCREMENT,
groupName VarChar(255) NOT NULL,
dateTimeCreated DATETIME,
moderator VarChar(255),
PRIMARY KEY (groupID)
);

CREATE TABLE IF NOT EXISTS groupMembership (
groupID INT NOT NULL,
email VarChar(255) NOT NULL,
PRIMARY KEY (groupID,email),
FOREIGN KEY (groupID) REFERENCES groups(groupID),
FOREIGN KEY (email) REFERENCES Profile(email)
ON DELETE CASCADE
ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS messages (
email VarChar(255) NOT NULL,
groupID INT NOT NULL,
dateTimePosted DATETIME NOT NULL,
messageData VarChar(255),
PRIMARY KEY(email, groupID, dateTimePosted),
FOREIGN KEY (groupID) REFERENCES groups(groupID),
FOREIGN KEY (email) REFERENCES Profile(email)
ON DELETE CASCADE
ON UPDATE CASCADE
);